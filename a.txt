<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href="https://certapple.io.vn/client/search-order"/>
    <title>Tra cứu đơn hàng | Dịch vụ ký ứng dụng tốt nhất</title>
    <meta name="description" content="Cung cấp chứng chỉ chất lượng uy tín với giá thành tốt nhất"/>
    <meta name="keywords" content="Chứng chỉ iPhone, Mua chứng chỉ iPhone, bán chứng chỉ iPhone, ipa, sign ipa, ký ứng dụng, chứng chỉ ios">
    <meta name="copyright" content="certapple.io.vn"/>
    <meta name="author" content="certapple.io.vn"/>
    <meta property="og:url" content="https://certapple.io.vn/">
    <meta property="og:site_name" content="https://certapple.io.vn/"/>
    <meta property="og:title" content="Tra cứu đơn hàng | Dịch vụ ký ứng dụng tốt nhất"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://certapple.io.vn/assets/storage/images/image_OGC.png"/>
    <meta property="og:image:secure" content="https://certapple.io.vn/assets/storage/images/image_OGC.png"/>
    <meta name="twitter:title" content="Tra cứu đơn hàng | Dịch vụ ký ứng dụng tốt nhất"/>
    <meta name="twitter:image" content="https://certapple.io.vn/assets/storage/images/image_OGC.png"/>
    <meta name="twitter:image:alt" content="Tra cứu đơn hàng | Dịch vụ ký ứng dụng tốt nhất"/>
    <link rel="icon" type="image/png" href="https://certapple.io.vn/assets/storage/images/favicon_3DA.png"/>
    <!-- Cute Alert -->
    <link class="main-stylesheet" href="https://certapple.io.vn/public/cute-alert/style.css" rel="stylesheet" type="text/css">
    <script src="https://certapple.io.vn/public/cute-alert/cute-alert.js"></script>
    <!-- jQuery -->
    <script src="https://certapple.io.vn/public/js/jquery-3.6.0.js"></script>
    <!-- Layout config Js -->
    <link rel="stylesheet" href="https://certapple.io.vn/public/cute-alert/style.css">
    <!-- Bootstrap Css -->
    <link href="https://certapple.io.vn/public/lv_assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <!-- Icons Css -->
    <link href="https://certapple.io.vn/public/lv_assets/css/icons.min.css" rel="stylesheet" type="text/css"/>
    <!-- Sweet Alert css-->
    <link href="https://certapple.io.vn/public/lv_assets/libs/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css"/>
    <!-- App Css-->
    <link href="https://certapple.io.vn/public/lv_assets/css/custom.css" rel="stylesheet" type="text/css"/>
    <!--  Font config  -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600&display=swap" rel="stylesheet"/>
    <!--  Base Css  -->
    <link rel="stylesheet" href="https://certapple.io.vn/public/lv_assets/css/core.css">
    <link rel="stylesheet" href="https://certapple.io.vn/public/lv_assets/css/animations.css">

    <!-- CKEditor -->
    <script src="https://certapple.io.vn/public/ckeditor/ckeditor.js"></script>
    <script>
        CKEDITOR.config.entities = false;
        CKEDITOR.config.entities_latin = false;
        CKEDITOR.config.htmlEncodeOutput = false;
        CKEDITOR.config.allowedContent = true;
        CKEDITOR.config.height = '200px';
        CKEDITOR.config.removeButtons = 'Save,NewPage,ExportPdf,Print,Templates,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,About';
        CKEDITOR.config.toolbarGroups = [
            { name: 'document', groups: [ 'mode', 'document', 'doctools' ] },
            { name: 'clipboard', groups: [ 'clipboard', 'undo' ] },
            { name: 'editing', groups: [ 'find', 'selection', 'spellchecker', 'editing' ] },
            '/',
            { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
            { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'paragraph' ] },
            { name: 'links', groups: [ 'links' ] },
            { name: 'insert', groups: [ 'insert' ] },
            '/',
            { name: 'styles', groups: [ 'styles' ] },
            { name: 'colors', groups: [ 'colors' ] },
            { name: 'tools', groups: [ 'tools' ] }
        ];
    </script>

    <!--  Page css  -->
    <link href="../../assets/css/search-order.css" rel="stylesheet">    <!-- End page css -->
    <link rel="stylesheet" href="https://certapple.io.vn/public/lv_assets/css/lightmode.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
</head>
<style>
    html,
    body {
        cursor: url("https://certapple.io.vn/assets/img/mouse.png"), progress;
    }
    a:hover, .btn:hover, input[type="radio"]:hover, label:hover {
        cursor: url("https://certapple.io.vn/assets/img/mouse1.png"), progress;
    }
</style><style>
.modern-nav {
    position: fixed;
    top: calc(14px + calc(var(--f7-safe-area-top, 0px) * 0.6));
    left: 14px;
    right: 14px;
    height: 50px;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.08),
        inset 0 0 1px 0 rgba(0, 102, 204, 0.4),
        0 7px 29px rgba(100, 100, 111, 0.2);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 12px;
    z-index: 5002;
    border-radius: 100px;
    transition: all 0.3s ease;
    max-width: 1200px;
    margin: 0 auto;
}

.modern-nav.at-top {
    background: rgba(255, 255, 255, 0.4);
    backdrop-filter: saturate(150%) blur(15px);
    -webkit-backdrop-filter: saturate(150%) blur(15px);
    box-shadow: 
        0 4px 16px rgba(0, 0, 0, 0.04),
        inset 0 0 1px 0 rgba(0, 102, 204, 0.2),
        0 4px 15px rgba(100, 100, 111, 0.1);
}

.sidebar-menu.active ~ .modern-nav,
body.sidebar-open .modern-nav {
    background: rgba(248, 249, 250, 0.95);
    backdrop-filter: saturate(100%) blur(10px);
    -webkit-backdrop-filter: saturate(100%) blur(10px);
}

.menu-button {
    background: rgba(0, 0, 0, 0.05);
    border: none;
    color: #333;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    height: 38px;
    width: 38px;
}

.menu-button:hover {
    background: rgba(0, 0, 0, 0.08);
    transform: scale(1.05);
}

.menu-button i {
    font-size: 20px;
}

.site-title {
    color: #333;
    font-size: 16px;
    font-weight: 600;
    text-decoration: none;
    letter-spacing: -0.02em;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
    max-width: 180px;
    overflow: hidden;
    text-overflow: ellipsis;
    display: none; 
}

.site-title:hover {
    color: #0066CC;
    text-decoration: none;
}

.nav-actions {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    max-width: 350px;
    gap: 8px;
}

.nav-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 36px;
    padding: 0 16px;
    background-color: rgba(0, 0, 0, 0.05);
    border-radius: 100px;
    color: #333;
    font-size: 13px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s ease;
    flex: 1;
    text-align: center;
    white-space: nowrap;
}

.nav-btn:hover {
    background-color: rgba(0, 0, 0, 0.08);
    color: #000;
    text-decoration: none;
    transform: translateY(-1px);
}

.nav-btn.primary {
    background-color: #0066cc;
    color: #fff;
}

.nav-btn.primary:hover {
    background-color: #0055aa;
    color: #fff;
    box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
}

.nav-btn.active {
    background-color: rgba(0, 102, 204, 0.12);
    color: #0066cc;
}

.nav-btn.primary.active {
    background-color: #0055aa;
    color: #fff;
}

.nav-btn i {
    margin-right: 6px;
    font-size: 14px;
}

.cart-btn {
    background: rgba(0, 0, 0, 0.05);
    border: none;
    color: #333;
    cursor: pointer;
    padding: 8px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    text-decoration: none;
    position: relative;
    height: 38px;
    width: 38px;
}

.cart-btn:hover {
    background: rgba(0, 0, 0, 0.08);
    text-decoration: none;
    transform: scale(1.05);
}

.cart-btn i {
    font-size: 20px;
}

.cart-badge {
    background: #0066CC;
    border-radius: 50%;
    color: #fff;
    font-size: 9px;
    font-weight: 700;
    height: 16px;
    width: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: -2px;
    right: -2px;
    box-shadow: 0 2px 4px rgba(0, 102, 204, 0.3);
}

body {
    padding-top: calc(64px + calc(var(--f7-safe-area-top, 0px) * 0.6));
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    background: transparent;
}

body.home-page {
    padding-top: 0;
}

body:not([style*="background"]) {
    background: #f5f5f7;
}

.bottom-nav {
    position: fixed;
    bottom: calc(14px + calc(var(--f7-safe-area-bottom, 0px) * 0.6));
    left: 14px;
    right: 14px;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    border-radius: 100px;
    padding: 4px;
    z-index: 5002;
    display: none;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.08),
        inset 0 0 1px 0 rgba(0, 102, 204, 0.4),
        0 7px 29px rgba(100, 100, 111, 0.2);
    height: auto;
    transition: transform 0.3s ease;
    width: auto;
    margin: 0 auto;
    max-width: 600px;
}

.bottom-nav.hidden {
    transform: translateY(calc(100% + 20px));
}

.bottom-nav-items {
    display: flex;
    justify-content: space-around;
    align-items: center;
    max-width: 100%;
    margin: 0;
    height: 100%;
    gap: 2px;
    padding: 0;
}

.bottom-nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: #666;
    transition: all 0.2s ease;
    padding: 8px 12px;
    border-radius: 100px;
    flex: 1;
    height: auto;
    min-height: 52px;
    position: relative;
    background: transparent;
}

.bottom-nav-item.active {
    color: #0066CC;
    background: rgba(0, 102, 204, 0.12);
}

.bottom-nav-item i {
    font-size: 22px;
    margin-bottom: 3px;
}

.bottom-nav-item span {
    font-size: 10px;
    font-weight: 600;
    text-align: center;
    line-height: 1.2;
    letter-spacing: 0.01em;
}

.bottom-nav-item:hover {
    text-decoration: none;
    color: #0066CC;
    background: rgba(0, 102, 204, 0.08);
}

.sidebar-menu {
    position: fixed;
    top: 50px;
    left: 0;
    width: 100%;
    height: calc(100vh - 50px);
    background: #f8f9fa;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 999;
    visibility: hidden;
    opacity: 0;
    transform: translateY(-100%);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.sidebar-menu.active {
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
}

.menu-container {
    max-width: 980px;
    margin: 0 auto;
    padding: 20px;
    padding-bottom: 100px;
}

.user-section {
    background: #ffffff;
    border-radius: 16px;
    padding: 20px;
    margin-bottom: 24px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    border: 1px solid #e9ecef;
}

.user-info {
    display: flex;
    align-items: center;
}

.user-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    margin-right: 16px;
    border: 2px solid #e9ecef;
}

.user-details {
    flex: 1;
}

.user-name {
    font-size: 16px;
    font-weight: 600;
    color: #212529;
    margin: 0 0 4px 0;
}

.user-balance {
    font-size: 14px;
    color: #6c757d;
    margin: 0;
}

.user-balance b {
    color: #dc3545;
    font-weight: 600;
}

.menu-section {
    margin-bottom: 32px;
}

.menu-section-title {
    color: #6c757d;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 12px;
    font-weight: 600;
    padding-left: 4px;
}

.menu-items {
    list-style: none;
    padding: 0;
    margin: 0;
    background: #fff;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    border: 1px solid #e9ecef;
}

.menu-item {
    border-bottom: 1px solid #f8f9fa;
    transform: translateY(-10px);
    opacity: 0;
    transition: all 0.3s ease;
    transition-delay: calc(var(--item-index) * 0.05s);
}

.menu-item:last-child {
    border-bottom: none;
}

.sidebar-menu.active .menu-item {
    transform: translateY(0);
    opacity: 1;
}

.menu-link {
    color: #495057;
    font-size: 15px;
    text-decoration: none;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    transition: all 0.2s ease;
    font-weight: 500;
    background: transparent;
}

.menu-link:hover {
    background: #f8f9fa;
    color: #0066CC;
    text-decoration: none;
}

.menu-link.active {
    color: #0066CC;
    background: #f0f8ff;
    font-weight: 600;
}

.menu-link i {
    margin-right: 12px;
    font-size: 20px;
    width: 24px;
    text-align: center;
    opacity: 0.8;
}

.menu-item.dropdown {
    position: relative;
}

.dropdown-toggle {
    position: relative;
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    padding: 16px 20px;
    color: #495057;
    font-size: 15px;
    display: flex;
    align-items: center;
    font-weight: 500;
    transition: all 0.2s ease;
}

.dropdown-toggle:hover {
    background: #f8f9fa;
    color: #0066CC;
}

.dropdown-toggle::after {
    margin-left: auto;
}

.dropdown-menu {
    position: static !important;
    transform: none !important;
    width: 100%;
    padding: 0;
    margin: 0;
    border: none;
    border-radius: 0;
    background: #f8f9fa;
    box-shadow: none;
    border-top: 1px solid #e9ecef;
}

.dropdown-item {
    padding: 12px 52px;
    color: #6c757d;
    font-size: 14px;
    transition: all 0.2s;
    border-bottom: 1px solid #f1f3f4;
}

.dropdown-item:last-child {
    border-bottom: none;
}

.dropdown-item:hover {
    background: #fff;
    color: #0066CC;
}

.dropdown-item.active {
    background: #0066CC;
    color: #fff;
}

.cart-menu {
    position: absolute;
    top: 45px;
    right: 0;
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 24px rgba(0,0,0,0.1);
    width: 320px;
    visibility: hidden;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
    z-index: 1001;
}

.cart-dropdown:hover .cart-menu {
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
}

.cart-header {
    padding: 16px;
    border-bottom: 1px solid #e5e5e5;
}

.cart-header h6 {
    color: #1d1d1f;
    margin: 0;
    font-size: 14px;
    font-weight: 500;
}

.cart-items {
    max-height: 400px;
    overflow-y: auto;
}

.cart-item {
    padding: 12px 16px;
    border-bottom: 1px solid #e5e5e5;
    display: flex;
    align-items: center;
    gap: 12px;
}

.cart-item img {
    width: 40px;
    height: 40px;
    border-radius: 6px;
    object-fit: cover;
}

.empty-cart {
    padding: 24px;
    text-align: center;
    color: #86868b;
}

@media (max-width: 768px) {
    body {
        padding-bottom: 60px;
    }
    
    .modern-nav .nav-actions {
        display: none;
    }
    
    .bottom-nav {
        display: block;
    }
    
    .modern-nav {
        padding: 0 10px;
        justify-content: space-between;
    }
    
    .menu-button {
        height: 36px;
        width: 36px;
    }
    
    .menu-button i {
        font-size: 18px;
    }
    
    .site-title {
        display: block; 
        font-size: 15px;
        max-width: 160px;
    }
    
    .nav-actions {
        display: none; 
    }
    
    .cart-btn {
        height: 36px;
        width: 36px;
    }
    
    .cart-btn i {
        font-size: 18px;
    }
    
    .menu-container {
        padding: 16px;
        padding-bottom: 100px;
    }
    
    .sidebar-menu {
        height: calc(100vh - 50px);
        padding-bottom: 0;
    }
    
    .user-section {
        padding: 16px;
        margin-bottom: 20px;
    }
    
    .user-avatar {
        width: 44px;
        height: 44px;
    }
    
    .menu-link {
        padding: 14px 16px;
        font-size: 15px;
    }
    
    .dropdown-item {
        padding: 10px 44px;
        font-size: 14px;
    }
}

@media (min-width: 769px) {
    .nav-btn {
        padding: 0 16px;
        font-size: 14px;
        min-width: 100px;
        white-space: nowrap;
    }
    
    .nav-actions {
        max-width: 500px;
        gap: 16px;
    }
    
    .bottom-nav {
        display: none !important;
    }
}

@media (min-width: 501px) and (max-width: 768px) {
    .modern-nav {
        padding: 0 15px;
    }
}
</style>

<nav class="modern-nav">
    <div style="display: flex; align-items: center;">
        <button class="menu-button" onclick="toggleSidebar()" aria-label="Menu">
            <i class='bx bx-menu'></i>
        </button>
    </div>
    
    <a href="https://certapple.io.vn/" class="site-title" style="text-decoration: none;">
        certapple.io.vn    </a>
    
    <div class="nav-actions">
        <a href="https://certapple.io.vn/client/home" class="nav-btn ">
            <i class='bx bx-home'></i>
            <span>Trang chủ</span>
        </a>
        
        <a href="https://certapple.io.vn/client/apps" class="nav-btn ">
            <i class='bx bxs-pen'></i>
            <span>Ứng dụng</span>
        </a>
        <a href="https://certapple.io.vn/client/search-order" class="nav-btn active">
            <i class='bx bx-search'></i>
            <span>Tra cứu</span>
        </a>
    </div>
    
    <div class="cart-dropdown">
        <a href="https://certapple.io.vn/client/orders" class="cart-btn" aria-label="Shopping Cart">
            <i class='bx bx-shopping-bag'></i>
            <span class="cart-badge">
                0            </span>
        </a>
        
        <div class="cart-menu">
            <div class="cart-header">
                <h6>Đơn hàng đang chờ xử lý</h6>
            </div>
            <div class="cart-items">
                                    <div class="empty-cart">
                        Bạn không có đơn hàng nào đang xử lý!                    </div>
                            </div>
        </div>
    </div>
</nav>

<div class="bottom-nav">
    <div class="bottom-nav-items">
        <a href="https://certapple.io.vn/client/home" class="bottom-nav-item ">
            <i class='bx bx-home'></i>
            <span>TRANG CHỦ</span>
        </a>
        
        <a href="https://certapple.io.vn/client/search-order" class="bottom-nav-item active">
            <i class='bx bx-search'></i>
            <span>TRA CỨU</span>
        </a>
        
        <a href="https://certapple.io.vn/client/recharge" class="bottom-nav-item ">
            <i class='bx bx-credit-card'></i>
            <span>NẠP TIỀN</span>
        </a>
        
        <a href="https://certapple.io.vn/client/orders" class="bottom-nav-item ">
            <i class='bx bx-package'></i>
            <span>ĐƠN HÀNG</span>
        </a>
        
                    <a href="https://certapple.io.vn/client/login" class="bottom-nav-item">
                <i class='bx bx-log-in'></i>
                <span>ĐĂNG NHẬP</span>
            </a>
            </div>
</div>

<div class="sidebar-menu">
    <div class="menu-container">
        
        <div class="menu-section">
            <h3 class="menu-section-title">Chức năng chính</h3>
            <ul class="menu-items">
                <li class="menu-item" style="--item-index: 0">
                    <a href="https://certapple.io.vn/client/home" class="menu-link ">
                        <i class='bx bx-home'></i>
                        <span>Trang chủ</span>
                    </a>
                </li>
                <li class="menu-item" style="--item-index: 1">
                    <a href="https://certapple.io.vn/client/apps" class="menu-link ">
                        <i class='bx bx-store'></i>
                        <span>Kho ứng dụng</span>
                    </a>
                </li>
                 <li class="menu-item" style="--item-index: 2">
                    <a href="https://certapple.io.vn/client/app-id" class="menu-link ">
                        <i class='bx bxs-pen'></i>
                        <span>Cài ứng dụng không cần login ID</span>
                    </a>
                </li>
                <li class="menu-item" style="--item-index: 2">
                    <a href="https://certapple.io.vn/client/sign-app" class="menu-link ">
                        <i class='bx bxs-pen'></i>
                        <span>Ký ứng dụng</span>
                    </a>
                </li>
                
                <li class="menu-item" style="--item-index: 3">
                    <a href="https://certapple.io.vn/client/search-order" class="menu-link active">
                        <i class='bx bx-search'></i>
                        <span>Tra cứu đơn hàng</span>
                    </a>
                </li>
                
                <li class="menu-item" style="--item-index: 4">
                    <a href="https://certapple.io.vn/client/check-certificate" class="menu-link ">
                        <i class='bx bx-search'></i>
                        <span>Kiểm tra trạng thái chứng chỉ</span>
                    </a>
                </li>
                
                <li class="menu-item" style="--item-index: 5">
                    <a href="https://certapple.io.vn/client/upgrade" class="menu-link ">
                        <i class='bx bx-crown'></i>
                        <span>Cấp bậc tài khoản</span>
                    </a>
                </li>
                
                <li class="menu-item" style="--item-index: 6">
                    <a href="https://certapple.io.vn/client/orders" class="menu-link ">
                        <i class='bx bx-package'></i>
                        <span>Lịch sử đơn hàng</span>
                    </a>
                </li>
            </ul>
        </div>

        
        <div class="menu-section">
            <h3 class="menu-section-title">Nạp tiền</h3>
            <ul class="menu-items">
                <li class="menu-item" style="--item-index: 10">
                    <a href="https://certapple.io.vn/client/recharge" class="menu-link ">
                        <i class='bx bx-credit-card'></i>
                        <span>Ngân hàng, ví điện tử</span>
                    </a>
                </li>
                                                            </ul>
        </div>

        
        
                    <div class="menu-section">
                <h3 class="menu-section-title">Tài khoản</h3>
                <ul class="menu-items">
                    <li class="menu-item" style="--item-index: ">
                        <a href="https://certapple.io.vn/client/login" class="menu-link">
                            <i class='bx bx-log-in'></i>
                            <span>Đăng Nhập</span>
                        </a>
                    </li>
                    <li class="menu-item" style="--item-index: 1">
                        <a href="https://certapple.io.vn/client/register" class="menu-link">
                            <i class='bx bx-user-plus'></i>
                            <span>Đăng Ký</span>
                        </a>
                    </li>
                </ul>
            </div>
            </div>
</div>

<script>
function toggleSidebar() {
    const sidebar = document.querySelector('.sidebar-menu');
    const bottomNav = document.querySelector('.bottom-nav');
    
    sidebar.classList.toggle('active');
    document.body.classList.toggle('sidebar-open');
    
    if (sidebar.classList.contains('active')) {
        bottomNav.classList.add('hidden');
    } else {
        bottomNav.classList.remove('hidden');
    }
}

document.addEventListener('click', function(event) {
    const sidebar = document.querySelector('.sidebar-menu');
    const menuToggle = document.querySelector('.menu-button');
    const bottomNav = document.querySelector('.bottom-nav');
    
    if (!sidebar.contains(event.target) && !menuToggle.contains(event.target) && sidebar.classList.contains('active')) {
        sidebar.classList.remove('active');
        document.body.classList.remove('sidebar-open');
        bottomNav.classList.remove('hidden'); 
    }
});

document.querySelectorAll('.dropdown-menu').forEach(function(element) {
    element.addEventListener('click', function(e) {
        e.stopPropagation();
    });
});

document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname;
    const bottomNavItems = document.querySelectorAll('.bottom-nav-item');
    
    bottomNavItems.forEach(function(item) {
        const href = item.getAttribute('href');
        if (href && currentPath.includes(href.split('/').pop())) {
            item.classList.add('active');
        }
    });
});

document.querySelectorAll('.menu-link').forEach(function(link) {
    link.addEventListener('click', function(e) {
        if (window.innerWidth <= 768) {
            const sidebar = document.querySelector('.sidebar-menu');
            const bottomNav = document.querySelector('.bottom-nav');
            sidebar.classList.remove('active');
            document.body.classList.remove('sidebar-open');
            bottomNav.classList.remove('hidden');
        }
    });
});

window.addEventListener('scroll', function() {
    const nav = document.querySelector('.modern-nav');
    if (window.scrollY === 0) {
        nav.classList.add('at-top');
    } else {
        nav.classList.remove('at-top');
    }
});

document.addEventListener('DOMContentLoaded', function() {
    const nav = document.querySelector('.modern-nav');
    if (window.scrollY === 0) {
        nav.classList.add('at-top');
    }
    
    const heroSection = document.querySelector('.hero-section');
    if (heroSection) {
        document.body.classList.add('home-page');
    }
});
</script>
<div class="main-content">
    <div class="page-content search-modern-container">
        <div class="container-fluid">
            <!-- Search Header -->
            <div class="search-header-modern">
                <h1>Tra cứu đơn hàng</h1>
                <p>Kiểm tra trạng thái đơn hàng và chứng chỉ của bạn</p>
            </div>

            <!-- Search Cards Container -->
            <div class="search-cards-container">
                <!-- Search Form Card -->
                <div class="search-form-card">
                    <div class="form-group">
                        <label class="form-label">Nhập UDID hoặc Mã đơn hàng</label>
                        <input type="text" id="search_input" class="search-input" 
                            value="" 
                            placeholder="Nhập UDID hoặc Mã đơn hàng cần tìm">
                    </div>
                    <button type="button" id="btn_search" class="btn-search">
                        <i class="fas fa-search"></i>Tìm kiếm                    </button>
                </div>

                <!-- Kết quả tìm kiếm -->
                <div class="search-result" style="display: none;">
                    <!-- Order Tabs -->
                    <div class="order-tabs">
                        <button class="order-tab active" data-tab="setup" onclick="switchSearchTab('setup')">
                            <span class="tab-text">Cài đặt</span>
                        </button>
                        <button class="order-tab" data-tab="info" onclick="switchSearchTab('info')">
                            <span class="tab-text">Thông tin đơn</span>
                        </button>
                    </div>

                    <!-- Tab: Cài đặt -->
                    <div class="tab-content-wrapper active" id="tab-setup">
                        <!-- Guides -->
                        
                        <!-- Copy Link Button - One line -->
                        <div class="share-link-button-container">
                            <button class="btn btn-primary-custom w-100" id="copyLinkBtn" onclick="copyShareLink()">
                                <i class="fas fa-copy me-2"></i>Sao chép liên kết đơn hàng                            </button>
                            <input type="hidden" id="shareLink" value="">
                        </div>

                        <!-- Certificate & Password Section - White Card Combined -->
                        <div class="certificate-section-white" style="display: none;">
                            <h6 class="mb-3">Certificate & Mật khẩu</h6>
                            
                            <!-- Certificate Download -->
                            <div class="row mb-3">
                                <div class="col-lg-3">
                                </div>
                                <div class="col-lg-9">
                                    <a href="#" class="btn btn-primary-custom download-cert">
                                        <i class="fas fa-download me-1"></i>Tải File Chứng Chỉ                                    </a>
                                    <!-- Check/Warranty buttons will be added here by JS -->
                                </div>
                            </div>

                            <!-- Password -->
                            <div class="row password-row" style="display: none;">
                                <div class="col-lg-3">
                                    <div class="info-label">Mật khẩu P12</div>
                                </div>
                                <div class="col-lg-9">
                                    <button class="btn btn-primary-custom" onclick="copyCertPassword()">
                                        <i class="fas fa-copy me-1"></i>Copy Mật khẩu                                    </button>
                                    <input type="hidden" class="cert-password" value="">
                                    <small class="text-muted mt-2 d-block">* Mật khẩu để import certificate vào Xcode/Keychain</small>
                                </div>
                            </div>
                        </div>

                       

                        <!-- Sign Buttons Section -->
                        <div class="sign-buttons-section" style="display: none;">
                            <!-- JavaScript sẽ add buttons -->
                        </div>
                    </div>

                    <!-- Tab: Thông tin đơn -->
                    <div class="tab-content-wrapper" id="tab-info">
                        <div class="result-card-modern">
                            <div class="result-header-modern">
                                <h3>Thông tin đơn hàng</h3>
                            </div>
                            
                            <div class="result-body-modern result-body">
                                <!-- Mã đơn hàng -->
                                <div class="info-group">
                                    <div class="row align-items-center">
                                        <div class="col-lg-3">
                                            <div class="info-label">Mã đơn hàng</div>
                                        </div>
                                        <div class="col-lg-9">
                                            <div class="info-value order-id fw-bold"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="info-divider"></div>

                                <!-- Gói dịch vụ -->
                                <div class="info-group">
                                    <div class="row align-items-center">
                                        <div class="col-lg-3">
                                            <div class="info-label">Gói dịch vụ</div>
                                        </div>
                                        <div class="col-lg-9 order-package"></div>
                                    </div>
                                </div>

                                <div class="info-divider"></div>

                                <!-- UDID -->
                                <div class="info-group">
                                    <div class="row">
                                        <div class="col-lg-3">
                                            <div class="info-label">UDID</div>
                                        </div>
                                        <div class="col-lg-9">
                                            <textarea class="form-control" rows="2" readonly></textarea>
                                        </div>
                                    </div>
                                </div>

                                <div class="info-divider"></div>

                                <!-- Trạng thái & Bảo hành -->
                                <div class="info-group">
                                    <div class="row align-items-center">
                                        <div class="col-lg-3">
                                            <div class="info-label">Trạng thái</div>
                                        </div>
                                        <div class="col-lg-9">
                                            <div class="order-status"></div>
                                            <div class="order-warranty-time mt-1" style="display: none;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="info-divider"></div>

                                <!-- Thời gian tạo & Cập nhật -->
                                <div class="info-group">
                                    <div class="row">
                                        <div class="col-lg-3">
                                            <div class="info-label mb-2">Thời gian tạo</div>
                                        </div>
                                        <div class="col-lg-9">
                                            <div class="info-value order-date mb-2"></div>
                                        </div>
                                        <div class="col-lg-3">
                                            <div class="info-label">Cập nhật lần cuối</div>
                                        </div>
                                        <div class="col-lg-9">
                                            <div class="info-value order-update"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Loading -->
<div class="modal fade modal-custom" id="loadingModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body text-center p-4">
                <div class="spinner-border text-primary mb-3" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <h5 class="mb-2">Đang ký ứng dụng...</h5>
                <p class="text-muted mb-0">Vui lòng đợi trong giây lát</p>
            </div>
        </div>
    </div>
</div>

<!-- Modal Result -->
<div class="modal fade modal-custom" id="resultModal" data-bs-backdrop="static" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body text-center p-4">
                <div id="resultIcon" class="mb-3">
                </div>
                <h5 class="mb-2" id="resultTitle"></h5>
                <p class="text-muted mb-0" id="resultMessage"></p>
            </div>
            <div class="modal-footer border-0 pt-0 justify-content-center" id="modalActions">
            </div>
        </div>
    </div>
</div>


<footer class="footer dark">
    <div class="container">
        <!-- Main Footer Navigation -->
        <div class="footer-nav">
            <!-- Column 1 -->
            
            <!-- Column 2 -->
            
            <!-- Column 3 -->
            
            <!-- Column 4 -->
                    </div>

        <!-- Contact Title & Social Links -->
<div class="contact-section">
    <div class="contact-title">
        <h3>Liên hệ chúng tôi</h3>
    </div>
    <div class="social-links">
                <a href="https://hhnios.github.io" target="_blank" class="social-btn facebook">
            <i class="fab fa-facebook-f"></i>
            <span>Fanpage</span>
        </a>
        
        
        
        
                <a href="https://t.me/hhn_ios" target="_blank" class="social-btn telegram">
            <i class="fas fa-users"></i>
            <span>Group Telegram</span>
        </a>
            </div>
</div>

        <!-- Footer Bottom -->
        <div class="footer-bottom">
            <!-- Copyright -->
                        <div class="copyright">
                Copyright © 2024 WEANSHHN . All rights reserved. Bảo lưu mọi quyền            </div>
            
            <!-- Policy Links -->
            <div class="policy-links">
                
                
                            </div>
        </div>
    </div>

    <style>
    .footer {
    background: #f5f5f7;
    padding: 40px 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    /* Thêm đường gạch ngang phía trên */
    border-top: 1px solid #d2d2d7;
}

.footer.dark {
    background: #1d1d1f;
    color: #f5f5f7;
    border-top: 1px solid #424245; /* Màu đường gạch cho dark mode */
}

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 15px;
    }

    .footer-nav {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 30px;
        margin-bottom: 30px;
        border-bottom: 1px solid rgba(0,0,0,0.1);
        padding-bottom: 30px;
    }

    .dark .footer-nav {
        border-color: rgba(255,255,255,0.1);
    }

    .nav-title {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 15px;
        color: #1d1d1f;
    }

    .dark .nav-title {
        color: #f5f5f7;
    }

    .footer-links {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .footer-links a {
        color: #424245;
        text-decoration: none;
        font-size: 14px;
        line-height: 2;
        transition: color 0.2s;
        display: block;
    }

    .dark .footer-links a {
        color: #f5f5f7;
        opacity: 0.8;
    }

    .footer-links a:hover {
        color: #0066cc;
    }

    .dark .footer-links a:hover {
        opacity: 1;
    }

    /* Social Links */
    .social-links {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin: 20px 0;
        padding: 20px 0;
        border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .dark .social-links {
        border-color: rgba(255,255,255,0.1);
    }

    .social-btn {
        display: inline-flex;
        align-items: center;
        padding: 10px 20px;
        border-radius: 8px;
        color: #fff;
        text-decoration: none;
        font-size: 14px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .social-btn i {
        margin-right: 8px;
        font-size: 20px;
    }

    .social-btn.facebook {
        background: #1877f2;
    }
    .social-btn.facebook:hover {
        background: #0d65d9;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(24, 119, 242, 0.3);
    }

    .social-btn.zalo {
        background: #0068ff;
    }
    .social-btn.zalo:hover {
        background: #0054cc;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0, 104, 255, 0.3);
    }

    .social-btn.telegram {
        background: #0088cc;
    }
    .social-btn.telegram:hover {
        background: #0074ad;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0, 136, 204, 0.3);
    }

    .social-btn.group {
        background: #25d366;
    }
    .social-btn.group:hover {
        background: #1fb959;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3);
    }

    /* Footer Bottom */
    .footer-bottom {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding-top: 20px;
    }

    .copyright {
        font-size: 12px;
        color: #86868b;
        margin-bottom: 10px;
    }

    .policy-links {
        display: flex;
        gap: 20px;
    }

    .policy-links a {
        color: #424245;
        text-decoration: none;
        font-size: 12px;
        transition: color 0.2s;
    }

    .dark .policy-links a {
        color: #f5f5f7;
        opacity: 0.8;
    }

    .policy-links a:hover {
        color: #0066cc;
    }

    .dark .policy-links a:hover {
        opacity: 1;
    }

    @media (max-width: 768px) {
        .footer-nav {
            grid-template-columns: repeat(2, 1fr);
        }

        .social-links {
            justify-content: center;
        }

        .policy-links {
            flex-direction: column;
            gap: 10px;
        }
    }

    @media (max-width: 480px) {
        .footer-nav {
            grid-template-columns: 1fr;
        }
    }
    </style>
</footer>

<!-- JAVASCRIPT -->
<script src="https://certapple.io.vn/public/lv_assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="https://certapple.io.vn/public/lv_assets/js/script.js"></script>
<script src="https://certapple.io.vn/public/lv_assets/libs/sweetalert2/sweetalert2.min.js"></script>
</body>
</html>
<script type="text/javascript">
$(document).ready(function() {
    // Tự động tìm kiếm nếu có tham số URL
    const urlParams = new URLSearchParams(window.location.search);
    const searchId = urlParams.get('id');
    if(searchId) {
        $("#search_input").val(searchId);
        performSearch(); // Tự động tìm kiếm
    }

    // Hàm tìm kiếm
    function performSearch() {
        console.log('performSearch called');
        let search = $("#search_input").val();
        console.log('Search value:', search);
        if (!search) {
            Swal.fire('Thất bại', 'Vui lòng nhập UDID hoặc Mã đơn hàng', 'error');
            return;
        }

        console.log('Starting AJAX request...');
        $.ajax({
            url: "https://certapple.io.vn/ajaxs/client/search-order.php",
            method: "POST",
            dataType: "JSON",
            data: {
                search: search
            },
            success: function(response) {
                if (response.status === 'success') {
                    let order = response.data;

                    // Ẩn phần tìm kiếm sau khi tìm thấy kết quả
                    $(".search-form-card").hide();

                    // Kiểm tra nếu đơn hàng đang chờ thanh toán
                    if (order.payment_status === 'pending') {
                        // Hiển thị kết quả nhưng chỉ với phần thanh toán
                        $(".search-result").show();
                        
                        // Lấy thông tin ngân hàng
                        const bank = order.bank_info;
                        if (bank) {
                            let qrImage = `https://api.vietqr.io/${bank.type_bank}/${bank.stk_bank}/${order.price}/${order.trans_id}/vietqr_net_2.jpg?accountName=${bank.accountName}`;
                            
                            // Xóa nội dung cũ và thêm chỉ phần thanh toán
                            $(".result-body").html(`
                                <div class="info-group">
                                    <div class="row align-items-center">
                                        <div class="col-lg-3">
                                            <div class="info-label">Mã đơn hàng</div>
                                        </div>
                                        <div class="col-lg-9">
                                            <div class="info-value order-id fw-bold fs-5">#${order.trans_id}</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="alert alert-warning mb-4">
                                    <h5 class="text-warning mb-3">Chờ thanh toán</h5>
                                    <div class="text-center mb-3">
                                        <img src="${qrImage}" style="max-width:200px"/>
                                    </div>
                                    <div class="list-group">
                                        <div class="list-group-item d-flex justify-content-between align-items-center">
                                            <span>Số tiền:</span>
                                            <b style="color:red">${order.price_format}</b>
                                        </div>
                                        <div class="list-group-item d-flex justify-content-between align-items-center">
                                            <span>STK:</span>
                                            <div>
                                                <b id="copySTK" style="color:green">${bank.stk_bank}</b>
                                                <button onclick="copyToClipboard('copySTK')" class="btn btn-sm btn-danger ms-2">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="list-group-item d-flex justify-content-between align-items-center">
                                            <span>Chủ TK:</span>
                                            <b>${bank.accountName}</b>
                                        </div>
                                        <div class="list-group-item d-flex justify-content-between align-items-center">
                                            <span>Nội dung CK:</span>
                                            <div>
                                                <b id="copyND" style="color:red">${order.trans_id}</b>
                                                <button onclick="copyToClipboard('copyND')" class="btn btn-sm btn-danger ms-2">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="info-group">
                                    <div class="row align-items-center">
                                        <div class="col-lg-3">
                                            <div class="info-label">Thời gian đặt hàng</div>
                                        </div>
                                        <div class="col-lg-9">
                                            <div class="info-value order-date">${order.create_gettime} - ${order.time_ago}</div>
                                        </div>
                                    </div>
                                </div>
                            `);
                        }
                    } else {
                        // Xử lý đơn hàng đã thanh toán - giữ nguyên code hiện tại
                        // Trong phần success của ajax, thay đoạn xử lý share link bằng đoạn này:
                        let shareUrl = "https://certapple.io.vn/client/search-order?id=" + order.trans_id;
                        
                        // Kiểm tra nếu phần tử shareLink đã tồn tại
                        if($("#shareLink").length) {
                            $("#shareLink").val(shareUrl);
                        } else {
                            // Nếu không tồn tại, thêm HTML vào đầu phần kết quả
                            $(".result-body").prepend(`
                                <div class="share-link-container mb-4">
                                    <label class="form-label fw-semibold">Link chia sẻ đơn hàng</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="shareLink" value="${shareUrl}" readonly>
                                        <button class="btn btn-primary-custom" onclick="copyShareLink()">
                                            <i class="fas fa-copy me-1"></i>Copy Link                                        </button>
                                    </div>
                                    <small class="text-muted mt-2 d-block">* Chia sẻ link này để người khác có thể xem thông tin đơn hàng</small>
                                </div>
                            `);
                        }

                        $(".order-id").text('#' + order.trans_id);
                        $(".order-status").html(order.status_html);
                        $(".search-result textarea").val(order.udid);
                        $(".order-date").text(order.create_gettime + ' - ' + order.time_ago);
                        $(".order-update").text(order.update_gettime + ' - ' + order.update_time_ago);

                        // Fill warranty info in tab Thông tin đơn
                        if (order.warranty_remaining && order.status == 1) {
                            $(".order-warranty-time").show().html(`
                                <span class="badge bg-success">
                                    <i class="fas fa-clock me-1"></i>
                                    Còn ${order.warranty_days} ngày ${order.warranty_hours} giờ ${order.warranty_minutes} phút
                                </span>
                            `);
                        } else {
                            $(".order-warranty-time").hide();
                        }

                        $(".order-package").html(`
                            <div class="form-check">
                                <input type="radio" class="form-check-input" disabled checked>
                                <label class="form-check-label">
                                    ${order.service_name} - ${order.package_name}
                                    <span class="badge rounded-pill bg-primary ms-2">Giá ${order.price_format}</span>
                                </label>
                            </div>
                        `);

                        let deviceStatusHtml = '';
                        if (order.udid) {
                            if (order.status == 1) { // Nếu đơn hàng đã hoàn tất
                                deviceStatusHtml = `
                                    <div class="device-status-box">
                                        <div class="status-badge">
                                            <i class="fas fa-check-circle me-2"></i>Đơn hàng đã hoàn tất
                                        </div>
                                        ${order.warranty_remaining ? `
                                            <div class="status-info">
                                                <i class="fas fa-clock me-2"></i>
                                                Thời gian bảo hành còn: ${order.warranty_days} ngày ${order.warranty_hours} giờ ${order.warranty_minutes} phút
                                            </div>
                                        ` : `
                                            <div class="alert alert-warning mt-2">Gói này đã hết hạn bảo hành</div>
                                        `}
                                    </div>
                                `;

                                // Hiển thị certificate và mật khẩu 
                                $(".certificate-section-white").show();
                                $(".download-cert").attr('href', order.cert_url);
                                
                                // Clear buttons cũ trước (tránh duplicate)
                                $('.certificate-section-white .cert-buttons').remove();
                                
                                // Hiển thị nút kiểm tra và bảo hành
                                if (order.cert_check_url) {
                                    $('.certificate-section-white .col-lg-9').append(`
                                        <div class="mt-2 cert-buttons">
                                            <button type="button" class="btn btn-info-custom check-cert-btn me-2">
                                                <i class="fas fa-search me-1"></i>Kiểm tra chứng chỉ                                            </button>
                                            <button type="button" class="btn btn-warning-custom warranty-cert-btn" style="display:none;">
                                                <i class="fas fa-sync-alt me-1"></i>Yêu cầu bảo hành                                            </button>
                                        </div>
                                    `);

                                    // TÌM ĐOẠN CODE NÀY TRONG HÀM performSearch() và THAY THẾ:

// Xử lý nút kiểm tra certificate
$('.check-cert-btn').click(function() {
    const btn = $(this);
    btn.prop('disabled', true)
    .html('<i class="fas fa-spinner fa-spin me-1"></i>Đang kiểm tra...');

    $.ajax({
        url: order.cert_check_url,
        type: 'GET',
        success: function(response) {
            try {
                const result = JSON.parse(response);
                if (result.status === 'success') {
                    // Tạo HTML cho thông tin certificate chi tiết
                    let statusClass = 'success';
                    let statusIcon = 'fa-check-circle';
                    let statusText = 'Còn hiệu lực';
                    let statusColor = '#28a745';
                    
                    if (result.is_revoked) {
                        statusClass = 'error';
                        statusIcon = 'fa-times-circle';
                        statusText = 'Đã bị thu hồi';
                        statusColor = '#dc3545';
                    }

                    // Tính toán thời gian còn lại từ định dạng dd/mm/yyyy hh:mm:ss
                    let expiryInfo = '';
                    if (result.expiry_time && !result.is_revoked) {
                        // Chuyển đổi từ định dạng 18/08/2026 14:21:03 sang Date
                        const dateParts = result.expiry_time.split(' ');
                        const dateOnly = dateParts[0]; // 18/08/2026
                        const timeOnly = dateParts[1]; // 14:21:03
                        
                        const dateArray = dateOnly.split('/'); // [18, 08, 2026]
                        const timeArray = timeOnly.split(':'); // [14, 21, 03]
                        
                        const expiryDate = new Date(
                            parseInt(dateArray[2]), // year
                            parseInt(dateArray[1]) - 1, // month (0-indexed)
                            parseInt(dateArray[0]), // day
                            parseInt(timeArray[0]), // hour
                            parseInt(timeArray[1]), // minute
                            parseInt(timeArray[2])  // second
                        );
                        
                        const now = new Date();
                        const diffTime = expiryDate - now;
                        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                        
                        if (diffTime < 0) {
                            expiryInfo = '<span class="badge bg-danger">Đã hết hạn</span>';
                            statusClass = 'warning';
                            statusIcon = 'fa-clock';
                            statusText = 'Đã hết hạn';
                            statusColor = '#ffc107';
                        } else if (diffDays <= 7) {
                            expiryInfo = `<span class="badge bg-warning">Còn ${diffDays} ngày</span>`;
                        } else if (diffDays <= 30) {
                            expiryInfo = `<span class="badge bg-warning">Còn ${diffDays} ngày</span>`;
                        } else {
                            expiryInfo = `<span class="badge bg-success">Còn ${diffDays} ngày</span>`;
                        }
                    }

                    // Xác định loại certificate
                    let certTypeInfo = '';
                    if (result.cert_type) {
                        if (result.cert_type.toLowerCase().includes('distribution')) {
                            certTypeInfo = '<span class="badge" style="background-color: #6f42c1; color: white;">Distribution</span>';
                        } else if (result.cert_type.toLowerCase().includes('development')) {
                            certTypeInfo = '<span class="badge bg-info">Development</span>';
                        } else {
                            certTypeInfo = `<span class="badge bg-secondary">${result.cert_type}</span>`;
                        }
                    }

                    // Thay thế phần tạo htmlContent trong code hiện tại:

let htmlContent = `
    <div class="certificate-check-result">
        <!-- Status Badge -->
        <div class="text-center mb-4">
            <span class="status-badge ${result.is_revoked ? 'revoked' : 'valid'}">
                <i class="fas ${result.is_revoked ? 'fa-times-circle' : 'fa-check-circle'}"></i>
                <span class="status-text">${result.is_revoked ? 'Đã bị thu hồi' : 'Còn hiệu lực'}</span>
            </span>
        </div>

        <!-- Notice Box -->
        <div class="notice-box ${result.is_revoked ? 'danger' : ''} mb-4">
            <i class="fas ${result.is_revoked ? 'fa-exclamation-triangle' : 'fa-info-circle'} me-2"></i>
            <strong>${result.is_revoked ? 'Certificate không còn hiệu lực' : 'Certificate hợp lệ'}</strong>
            <p class="mb-0 mt-1">
                ${result.is_revoked 
                    ? 'Chứng chỉ này đã bị Apple thu hồi và không thể sử dụng.' 
                    : 'Chứng chỉ này vẫn còn hiệu lực và có thể sử dụng bình thường.'}
            </p>
        </div>

        <!-- Certificate Info -->
        <div class="cert-info-row">
            <div class="cert-info-label">Tên chứng chỉ</div>
            <div class="cert-info-value">${result.cert_name || 'N/A'}</div>
        </div>

        <div class="cert-info-row">
            <div class="cert-info-label">Loại chứng chỉ</div>
            <div class="cert-info-value">
                <span class="cert-type-badge ${result.cert_type && result.cert_type.toLowerCase().includes('distribution') ? 'distribution' : 'development'}">
                    ${result.cert_type || 'N/A'}
                </span>
            </div>
        </div>

        <div class="cert-info-row">
            <div class="cert-info-label">Ngày hết hạn</div>
            <div class="cert-info-value">
                <div class="expiry-info">
                    <span>${result.expiry_time || 'N/A'}</span>
                    ${!result.is_revoked && result.expiry_time ? `<span class="expiry-status ${getExpiryStatus(result.expiry_time).class}">${getExpiryStatus(result.expiry_time).text}</span>` : ''}
                </div>
            </div>
        </div>

        ${result.is_revoked && result.revoke_time ? `
            <div class="cert-info-row revoke_time_row">
                <div class="cert-info-label">Thời gian thu hồi</div>
                <div class="cert-info-value text-danger">${result.revoke_time}</div>
            </div>
        ` : ''}
        
        ${result.is_revoked && order.warranty_remaining ? `
            <div class="mt-4 p-3" style="background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                <i class="fas fa-shield-alt text-warning me-2"></i>
                <strong>Bảo hành có sẵn:</strong> Bạn có thể yêu cầu cấp lại certificate mới.
            </div>
        ` : ''}
    </div>

    <style>
    .certificate-check-result .status-badge {
        display: inline-flex;
        align-items: center;
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: 500;
        font-size: 14px;
    }

    .certificate-check-result .status-badge.valid {
        background: #E3F2E9;
        color: #1D804B;
    }

    .certificate-check-result .status-badge.revoked {
        background: #FFE9E9;
        color: #D92D20;
    }

    .certificate-check-result .status-badge i {
        margin-right: 8px;
    }

    .certificate-check-result .notice-box {
        background: #F8F9FF;
        border-radius: 12px;
        padding: 15px 20px;
        border-left: 4px solid #007AFF;
    }

    .certificate-check-result .notice-box.danger {
        background: #FEF2F2;
        border-left-color: #DC2626;
    }

    .certificate-check-result .cert-info-row {
        display: flex;
        align-items: flex-start;
        padding: 15px 0;
        border-bottom: 1px solid #f0f0f0;
    }

    .certificate-check-result .cert-info-row:last-child {
        border-bottom: none;
    }

    .certificate-check-result .cert-info-label {
        width: 150px;
        color: #666;
        font-size: 14px;
        font-weight: 500;
        flex-shrink: 0;
    }

    .certificate-check-result .cert-info-value {
        flex: 1;
        font-weight: 500;
        color: #333;
    }

    .certificate-check-result .cert-type-badge {
        display: inline-flex;
        align-items: center;
        padding: 6px 12px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .certificate-check-result .cert-type-badge.development {
        background: #E1F5FE;
        color: #0277BD;
    }

    .certificate-check-result .cert-type-badge.distribution {
        background: #F3E5F5;
        color: #7B1FA2;
    }

    .certificate-check-result .expiry-info {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
    }

    .certificate-check-result .expiry-status {
        padding: 4px 8px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 500;
    }

    .certificate-check-result .expiry-status.valid {
        background: #E3F2E9;
        color: #1D804B;
    }

    .certificate-check-result .expiry-status.warning {
        background: #FFF3CD;
        color: #856404;
    }

    .certificate-check-result .expiry-status.expired {
        background: #FFE9E9;
        color: #D92D20;
    }
    </style>
`;

// Hàm tính toán trạng thái hết hạn
function getExpiryStatus(expiryTimeStr) {
    // Chuyển đổi từ định dạng 18/08/2026 14:21:03 sang Date
    const dateParts = expiryTimeStr.split(' ');
    const dateOnly = dateParts[0]; // 18/08/2026
    const timeOnly = dateParts[1]; // 14:21:03
    
    const dateArray = dateOnly.split('/'); // [18, 08, 2026]
    const timeArray = timeOnly.split(':'); // [14, 21, 03]
    
    const expiryDate = new Date(
        parseInt(dateArray[2]), // year
        parseInt(dateArray[1]) - 1, // month (0-indexed)
        parseInt(dateArray[0]), // day
        parseInt(timeArray[0]), // hour
        parseInt(timeArray[1]), // minute
        parseInt(timeArray[2])  // second
    );
    
    const now = new Date();
    const diffTime = expiryDate - now;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    if (diffTime < 0) {
        return { class: 'expired', text: 'Đã hết hạn' };
    } else if (diffDays <= 30) {
        return { class: 'warning', text: `Còn ${diffDays} ngày` };
    } else {
        return { class: 'valid', text: `Còn ${diffDays} ngày` };
    }
}

// Hiển thị SweetAlert đơn giản
Swal.fire({
    title: 'Thông tin chứng chỉ',
    html: htmlContent,
    width: '500px',
    showCancelButton: result.is_revoked && order.warranty_remaining,
    confirmButtonText: 'Đóng',
    cancelButtonText: result.is_revoked && order.warranty_remaining ? 'Yêu cầu bảo hành' : '',
    confirmButtonColor: '#007AFF',
    cancelButtonColor: '#ffc107',
    reverseButtons: true
}).then((modalResult) => {
    if (modalResult.dismiss === Swal.DismissReason.cancel && result.is_revoked && order.warranty_remaining) {
        // Gọi hàm bảo hành đã có sẵn trong code gốc
        $('.warranty-cert-btn').click();
    }
});

                    // Hiển thị nút bảo hành nếu certificate bị thu hồi
                    if (result.is_revoked && order.warranty_remaining) {
                        $('.warranty-cert-btn').show();
                    }
                } else {
                    Swal.fire('Lỗi', result.msg, 'error');
                }
            } catch(e) {
                Swal.fire('Lỗi', 'Không thể kiểm tra certificate', 'error');
            }
        },
        error: function() {
            Swal.fire('Lỗi', 'Không thể kết nối đến server', 'error');
        },
        complete: function() {
            btn.prop('disabled', false)
            .html('<i class="fas fa-search me-1"></i>Kiểm tra chứng chỉ');
        }
    });
});
                                    // Xử lý nút bảo hành
                                    $('.warranty-cert-btn').click(function() {
                                        Swal.fire({
                                            title: 'Xác nhận bảo hành',
                                            text: 'Sau khi ấn nút đồng ý, hệ thống sẽ tự động bảo hành và xuất chứng chỉ sau khi UDID được Apple duyệt, thời gian sẽ mất khoảng từ 3,17,30 ngày tuỳ vào thời gian Apple duyệt, bạn sẽ nhận được chứng chỉ mới hoàn toàn.',
                                            icon: 'warning',
                                            showCancelButton: true,
                                            confirmButtonText: 'Đồng ý',
                                            cancelButtonText: 'Hủy'
                                        }).then((result) => {
                                            if (result.isConfirmed) {
                                                $.ajax({
                                                    url: order.cert_warranty_url, 
                                                    type: 'GET',  // Đổi sang GET 
                                                    data: {
                                                        order_id: order.trans_id  // Thêm order_id vào request
                                                    },
                                                    success: function(response) {
                                                        try {
                                                            const result = JSON.parse(response);
                                                            if (result.status === 'success') {
                                                                Swal.fire({
                                                                    icon: 'success',
                                                                    title: 'Thành công',
                                                                    text: result.msg,
                                                                    showConfirmButton: false,
                                                                    timer: 2000
                                                                }).then(() => {
                                                                    location.reload();
                                                                });
                                                            } else {
                                                                Swal.fire('Lỗi', result.msg, 'error');
                                                            }
                                                        } catch(e) {
                                                            Swal.fire('Lỗi', 'Không thể xử lý yêu cầu', 'error');
                                                        }
                                                    },
                                                    error: function() {
                                                        Swal.fire('Lỗi', 'Không thể kết nối đến server', 'error');
                                                    }
                                                });
                                            }
                                        });
                                    });
                                }
                                if (order.p12_pass) {
                                    $(".password-row").show();
                                    $(".cert-password").val(order.p12_pass);
                                }

                                // Hiển thị các nút ký ứng dụng
                                if (order.sign_buttons && order.sign_buttons.length > 0) {
                                    let signButtonsHtml = '<h6 class="mb-3"><i class="fas fa-mobile-alt me-2"></i>Cài đặt ứng dụng</h6><div class="app-buttons-grid">';
                                    order.sign_buttons.forEach(button => {
                                        signButtonsHtml += `
                                            <button class="sign-app-btn" 
                                                data-sign-url="${button.sign_url}">
                                                <i class="fas fa-signature"></i>${button.label}
                                            </button>
                                        `;
                                    });
                                    signButtonsHtml += '</div>';
                                    $(".sign-buttons-section")
                                        .html(signButtonsHtml)
                                        .show();
                                }
                            } else {
                                if (order.udid_status === 'ENABLED') {
                                    deviceStatusHtml = `
                                        <div class="device-status-box">
                                            <div class="status-badge">
                                                <i class="fas fa-check-circle me-2"></i>UDID đã được duyệt
                                            </div>
                                        </div>
                                    `;
                                } else if (order.udid_status === 'PROCESSING') {
                                    deviceStatusHtml = `
                                        <div class="device-status-box">
                                            <div class="status-badge">
                                                <i class="fas fa-cog fa-spin me-2"></i>Apple đang xử lý UDID
                                            </div>
                                            ${order.cert_remaining ? `
                                                <div class="status-info">
                                                    <i class="fas fa-hourglass-half me-2"></i>
                                                    Apple sẽ duyệt thiết bị này và cấp chứng chỉ sau: ${order.cert_days} ngày ${order.cert_hours} giờ ${order.cert_minutes} phút
                                                </div>
                                            ` : ''}
                                        </div>
                                    `;
                                } else if (order.udid_status === 'INELIGIBLE') {
                                    deviceStatusHtml = `
                                        <div class="device-status-box">
    <div class="status-badge">
        <i class="fas fa-exclamation-triangle me-2"></i>UDID đang bị APPLE phạt
    </div>
    <div class="status-info">
        <i class="fas fa-info-circle me-2"></i>
        Thiết bị nằm trong danh sách BLACKLIST APPLE, vui lòng chờ 14 đến 30 ngày để APPLE mở khoá và duyệt chứng chỉ.
    </div>
    <div class="status-info">
        <i class="fas fa-lightbulb me-2"></i>
        Đừng lãng phí mua lại gói khác, hệ thống sẽ tự động cấp chứng chỉ khi APPLE mở khoá, hoặc bạn có thể mua gói Xoá Blacklist từ chúng tôi.
    </div>
</div>

<style>
.device-status-box {
    background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
    border: 1px solid #ffc107;
    border-radius: 8px;
    padding: 20px;
    margin: 15px 0;
    box-shadow: 0 2px 8px rgba(255, 193, 7, 0.2);
}

.status-badge {
    background: #dc3545;
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 15px;
    display: inline-block;
    box-shadow: 0 2px 4px rgba(220, 53, 69, 0.3);
}

.status-info {
    background: rgba(255, 255, 255, 0.8);
    padding: 12px 15px;
    border-radius: 6px;
    margin-bottom: 10px;
    border-left: 4px solid #ffc107;
    font-size: 14px;
    line-height: 1.5;
    color: #856404;
}

.status-info:last-child {
    margin-bottom: 0;
    border-left-color: #17a2b8;
    background: rgba(23, 162, 184, 0.1);
    color: #0c5460;
}

.status-info i {
    color: #ffc107;
    opacity: 0.8;
}

.status-info:last-child i {
    color: #17a2b8;
}

.me-2 {
    margin-right: 8px;
}
</style>
                                    `;
                                } else {
                                    deviceStatusHtml = `
                                        <div class="device-status-box">
                                            <div class="status-badge">
                                                <i class="fas fa-clock me-2"></i>Chờ thêm vào Dev
                                            </div>
                                        </div>
                                    `;
                                }

                                // Ẩn các section khác khi đơn chưa hoàn tất
                                $(".certificate-section-white, .sign-buttons-section").hide();
                                $(".password-row").hide();
                            }
                        } else {
                            deviceStatusHtml = `
                                <div class="device-status-box">
                                    <div class="status-badge">
                                        <i class="fas fa-minus-circle me-2"></i>Chưa có thông tin
                                    </div>
                                </div>
                            `;
                        }
                        
                        $(".device-status").html(deviceStatusHtml);
                    }
                    
                    $(".search-result").fadeIn();
                    
                } else {
                    Swal.fire('Thất bại', response.msg, 'error');
                }
            },
            error: function(xhr, status, error) {
                Swal.fire('Thất bại', 'Có lỗi xảy ra khi tìm kiếm', 'error');
            }
        });
    }

    // Click button tìm kiếm
    console.log('Binding click event to #btn_search');
    $("#btn_search").on("click", function() {
        console.log('Button clicked!');
        performSearch();
    });

    // Enter key trên input search
    $("#search_input").keypress(function(e) {
        if (e.which == 13) {
            performSearch();
        }
    });

    $(document).on('click', '.sign-app-btn', function(e) {
        e.preventDefault();
        const signUrl = $(this).data('sign-url');
        const loadingModal = new bootstrap.Modal(document.getElementById('loadingModal'));
        const resultModal = new bootstrap.Modal(document.getElementById('resultModal'));
        
        $('#modalActions').empty();
        loadingModal.show();
        
        $.ajax({
            url: signUrl,
            method: 'GET',
            success: function(response) {
                loadingModal.hide();
                
                try {
                    const result = typeof response === 'string' ? JSON.parse(response) : response;
                    
                    if (result.success) {
                        $('#resultIcon').html('<i class="fas fa-check-circle text-success" style="font-size: 3rem;"></i>');
                        $('#resultTitle').text('Ký ứng dụng thành công!');
                        $('#resultMessage').text('Bấm nút bên dưới để cài đặt ứng dụng.');
                        
                        $('#modalActions').html(`
                            <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Đóng</button>
                            <button type="button" class="btn btn-primary-custom" id="installApp">
                                <i class="fas fa-download me-1"></i>Cài đặt ngay
                            </button>
                        `);
                        
                        $('#installApp').on('click', function() {
                            window.location.href = result.download_url;
                        });
                        
                        resultModal.show();
                    } else {
                        $('#resultIcon').html('<i class="fas fa-exclamation-triangle text-danger" style="font-size: 3rem;"></i>');
                        $('#resultTitle').text('Ký ứng dụng thất bại!');
                        $('#resultMessage').text(result.message || 'Có lỗi xảy ra trong quá trình ký ứng dụng.');
                        
                        $('#modalActions').html(`
                            <button type="button" class="btn btn-primary-custom" data-bs-dismiss="modal">Đóng</button>
                        `);
                        
                        resultModal.show();
                    }
                } catch (error) {
                    $('#resultIcon').html('<i class="fas fa-exclamation-triangle text-danger" style="font-size: 3rem;"></i>');
                    $('#resultTitle').text('Đã xảy ra lỗi!');
                    $('#resultMessage').text('Có lỗi xảy ra trong quá trình xử lý.');
                    
                    $('#modalActions').html(`
                        <button type="button" class="btn btn-primary-custom" data-bs-dismiss="modal">Đóng</button>
                    `);
                    
                    resultModal.show();
                }
            },
            error: function() {
                loadingModal.hide();
                
                $('#resultIcon').html('<i class="fas fa-exclamation-triangle text-danger" style="font-size: 3rem;"></i>');
                $('#resultTitle').text('Lỗi kết nối!');
                $('#resultMessage').text('Không thể kết nối đến máy chủ.');
                
                $('#modalActions').html(`
                    <button type="button" class="btn btn-primary-custom" data-bs-dismiss="modal">Đóng</button>
                `);
                
                resultModal.show();
            }
        });
    });
});

function copyToClipboard(elementId) {
    const element = document.getElementById(elementId);
    const text = element.textContent;
    
    navigator.clipboard.writeText(text).then(() => {
        Swal.fire({
            icon: 'success',
            title: 'Thành công!',
            text: 'Đã sao chép nội dung!',
            timer: 2000,
            timerProgressBar: true,
            showConfirmButton: false
        });
    }).catch(() => {
        Swal.fire({
            icon: 'error',
            title: 'Lỗi!',
            text: 'Không thể sao chép nội dung!'
        });
    });
}

// Switch Search Tab Function
function switchSearchTab(tabName) {
    document.querySelectorAll(".order-tab").forEach(tab => {
        tab.classList.remove("active");
    });
    document.querySelectorAll(".tab-content-wrapper").forEach(content => {
        content.classList.remove("active");
    });
    document.querySelector(`.order-tab[data-tab="${tabName}"]`).classList.add("active");
    document.getElementById(`tab-${tabName}`).classList.add("active");
}

// Copy Certificate Password
function copyCertPassword() {
    const input = document.querySelector(".cert-password");
    const btn = event.target.closest("button");
    const originalHTML = btn.innerHTML;
    
    try {
        navigator.clipboard.writeText(input.value).then(() => {
            btn.innerHTML = '<i class="fas fa-check me-1"></i>Đã copy!';
            setTimeout(() => {
                btn.innerHTML = originalHTML;
            }, 2000);
        });
    } catch(err) {
        // Fallback
        const temp = document.createElement('input');
        temp.value = input.value;
        document.body.appendChild(temp);
        temp.select();
        document.execCommand('copy');
        document.body.removeChild(temp);
        
        btn.innerHTML = '<i class="fas fa-check me-1"></i>Đã copy!';
        setTimeout(() => {
            btn.innerHTML = originalHTML;
        }, 2000);
    }
}

function copyShareLink() {
    const shareInput = document.getElementById("shareLink");
    const btn = document.getElementById("copyLinkBtn");
    const originalHTML = btn.innerHTML;
    
    try {
        navigator.clipboard.writeText(shareInput.value).then(() => {
            btn.innerHTML = '<i class="fas fa-check me-2"></i>Đã sao chép!';
            setTimeout(() => {
                btn.innerHTML = originalHTML;
            }, 2000);
        });
    } catch(err) {
        // Fallback cho browser cũ
        const temp = document.createElement('input');
        temp.value = shareInput.value;
        document.body.appendChild(temp);
        temp.select();
        document.execCommand('copy');
        document.body.removeChild(temp);
        
        btn.innerHTML = '<i class="fas fa-check me-2"></i>Đã sao chép!';
        setTimeout(() => {
            btn.innerHTML = originalHTML;
        }, 2000);
    }
}
</script>

<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"48fd5fb199dc440689c22ef4a2777498","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
